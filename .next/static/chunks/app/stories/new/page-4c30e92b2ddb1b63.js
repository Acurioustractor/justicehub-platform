(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4378],{5824:function(e,t,r){Promise.resolve().then(r.bind(r,8384))},1266:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(8030).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6780:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(8030).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},2513:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(8030).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9061:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(8030).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},500:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(8030).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},8184:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(8030).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},8954:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(8030).Z)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]])},8384:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return er}});var a=r(7437),s=r(2265),n=r(6463),i=r(2727),l=r(9733),o=r(7209),d=r(402),c=r(9888),u=r(9055),m=r(7992),f=r(8185),x=r(6864),p=r(9354),h=r(8030);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let y=(0,h.Z)("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]),v=(0,h.Z)("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]),g=(0,h.Z)("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]),j=(0,h.Z)("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]),b=(0,h.Z)("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]),N=(0,h.Z)("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),w=(0,h.Z)("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]),k=(0,h.Z)("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),Z=(0,h.Z)("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]),C=(0,h.Z)("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]),S=(0,h.Z)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);var z=r(9973);function M(e){let{content:t,onChange:r,placeholder:n="Start writing your story...",className:i}=e,o=(0,s.useRef)(null),d=(0,s.useRef)(!0);(0,s.useEffect)(()=>{o.current&&!d.current&&(o.current.innerHTML=t),d.current=!1},[t]);let c=()=>{o.current&&(d.current=!0,r(o.current.innerHTML))},u=(e,t)=>{var r;document.execCommand(e,!1,t),null===(r=o.current)||void 0===r||r.focus(),c()},m=e=>{let{onClick:t,icon:r,title:s}=e;return(0,a.jsx)(l.z,{type:"button",variant:"ghost",size:"sm",onClick:t,title:s,className:"h-8 w-8 p-0",children:(0,a.jsx)(r,{className:"h-4 w-4"})})};return(0,a.jsxs)("div",{className:(0,p.cn)("border rounded-lg overflow-hidden",i),children:[(0,a.jsxs)("div",{className:"border-b bg-gray-50 dark:bg-gray-800 p-2 flex items-center gap-1 flex-wrap",children:[(0,a.jsx)(m,{onClick:()=>u("undo"),icon:y,title:"Undo"}),(0,a.jsx)(m,{onClick:()=>u("redo"),icon:v,title:"Redo"}),(0,a.jsx)(z.Z,{orientation:"vertical",className:"h-6 mx-1"}),(0,a.jsx)(m,{onClick:()=>u("formatBlock","h2"),icon:g,title:"Heading 2"}),(0,a.jsx)(m,{onClick:()=>u("formatBlock","h3"),icon:j,title:"Heading 3"}),(0,a.jsx)(z.Z,{orientation:"vertical",className:"h-6 mx-1"}),(0,a.jsx)(m,{onClick:()=>u("bold"),icon:b,title:"Bold"}),(0,a.jsx)(m,{onClick:()=>u("italic"),icon:N,title:"Italic"}),(0,a.jsx)(m,{onClick:()=>u("underline"),icon:w,title:"Underline"}),(0,a.jsx)(z.Z,{orientation:"vertical",className:"h-6 mx-1"}),(0,a.jsx)(m,{onClick:()=>u("insertUnorderedList"),icon:k,title:"Bullet List"}),(0,a.jsx)(m,{onClick:()=>u("insertOrderedList"),icon:Z,title:"Numbered List"}),(0,a.jsx)(m,{onClick:()=>u("formatBlock","blockquote"),icon:C,title:"Quote"}),(0,a.jsx)(z.Z,{orientation:"vertical",className:"h-6 mx-1"}),(0,a.jsx)(m,{onClick:()=>{let e=prompt("Enter URL:");e&&u("createLink",e)},icon:S,title:"Insert Link"})]}),(0,a.jsx)("div",{ref:o,contentEditable:!0,onInput:c,onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),u("insertText","    "))},className:(0,p.cn)("min-h-[400px] p-4 focus:outline-none prose prose-lg dark:prose-invert max-w-none","prose-p:my-3 prose-headings:mt-6 prose-headings:mb-4","prose-ul:my-3 prose-ol:my-3 prose-li:my-1","prose-blockquote:border-l-4 prose-blockquote:border-gray-300 prose-blockquote:pl-4","[&:empty:before]:content-[attr(data-placeholder)] [&:empty:before]:text-gray-400"),"data-placeholder":n,dangerouslySetInnerHTML:{__html:t}})]})}var R=r(1617);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let P=(0,h.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var V=r(8954),_=r(2023),E=r(8184),U=r(6780),L=r(4697),T=r(3274),q=r(2468);function B(e){let{onMediaAdd:t,onMediaUploaded:r,existingMedia:n=[],onExistingMediaRemove:i,maxFileSize:o=10,acceptedTypes:d=["image/*","video/*","application/pdf"],uploadType:c="story_media",autoUpload:u=!0}=e,[x,h]=(0,s.useState)([]),[y,v]=(0,s.useState)(!1),[g,j]=(0,s.useState)([]),b=(0,s.useRef)(null),N=e=>e.type.startsWith("image/")?"image":e.type.startsWith("video/")?"video":"document",w=e=>{switch(e){case"image":return P;case"video":return V.Z;default:return _.Z}},k=e=>e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB",Z=e=>{let t=1048576*o;return e.size>t?'File "'.concat(e.name,'" exceeds maximum size of ').concat(o,"MB"):null},C=async e=>{if(!e.file)return;let t=new FormData;t.append("file",e.file),t.append("type",c),t.append("folder",c);try{h(t=>t.map(t=>t.id===e.id?{...t,uploadStatus:"uploading",uploadProgress:0}:t));let a=await fetch("/api/upload",{method:"POST",body:t});if(!a.ok){let e=await a.json();throw Error(e.error||"Upload failed")}let s=await a.json();h(t=>t.map(t=>t.id===e.id?{...t,uploadStatus:"complete",uploadProgress:100,url:s.url,key:s.key}:t)),r&&e.file&&r([{file:e.file,url:s.url,key:s.key}])}catch(t){h(r=>r.map(r=>r.id===e.id?{...r,uploadStatus:"error",error:t instanceof Error?t.message:"Upload failed"}:r))}},S=async e=>{if(!e)return;let r=[],a=[];if(Array.from(e).forEach(e=>{let t=Z(e);t?a.push(t):r.push({id:Math.random().toString(36).substr(2,9),file:e,type:N(e),name:e.name,size:e.size,uploadStatus:"pending"})}),a.length>0&&j(a),r.length>0&&(h(e=>[...e,...r]),t(r.map(e=>e.file)),u))for(let e of r)await C(e)},z=e=>{let t=x.find(t=>t.id===e);(null==t?void 0:t.uploadStatus)!=="uploading"&&h(t=>t.filter(t=>t.id!==e))},M=async e=>{let t=x.find(t=>t.id===e);t&&"error"===t.uploadStatus&&await C(t)},B=e=>{i&&i(e)};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{onDragOver:e=>{e.preventDefault(),v(!0)},onDragLeave:e=>{e.preventDefault(),v(!1)},onDrop:e=>{e.preventDefault(),v(!1),S(e.dataTransfer.files)},className:(0,p.cn)("border-2 border-dashed rounded-lg p-8 text-center transition-colors",y?"border-primary bg-primary/5":"border-gray-300 dark:border-gray-700"),children:[(0,a.jsx)(E.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,a.jsx)("p",{className:"text-lg font-medium mb-2",children:"Drag and drop files here, or click to browse"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:["Maximum file size: ",o,"MB"]}),(0,a.jsx)(l.z,{type:"button",variant:"outline",onClick:()=>{var e;return null===(e=b.current)||void 0===e?void 0:e.click()},children:"Choose Files"}),(0,a.jsx)("input",{ref:b,type:"file",multiple:!0,accept:d.join(","),onChange:e=>S(e.target.files),className:"hidden"})]}),g.length>0&&(0,a.jsxs)(m.bZ,{variant:"destructive",children:[(0,a.jsx)(U.Z,{className:"h-4 w-4"}),(0,a.jsx)(m.X,{children:(0,a.jsx)("ul",{className:"list-disc list-inside",children:g.map((e,t)=>(0,a.jsx)("li",{children:e},t))})})]}),(x.length>0||n.length>0)&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Attached Media"}),n.map(e=>{let t=w(e.type);return(0,a.jsx)(f.Zb,{className:"p-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(t,{className:"h-8 w-8 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:k(e.size)})]})]}),(0,a.jsx)(l.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>B(e.id),children:(0,a.jsx)(L.Z,{className:"h-4 w-4"})})]})},e.id)}),x.map(e=>{let t=w(e.type);return(0,a.jsxs)(f.Zb,{className:"p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(t,{className:"h-8 w-8 text-gray-400"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:k(e.size)}),"uploading"===e.uploadStatus&&e.uploadProgress&&(0,a.jsx)(R.E,{value:e.uploadProgress,className:"h-1 mt-2"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:["uploading"===e.uploadStatus&&(0,a.jsx)(T.Z,{className:"h-4 w-4 animate-spin text-blue-500"}),"complete"===e.uploadStatus&&(0,a.jsx)(q.Z,{className:"h-4 w-4 text-green-500"}),"error"===e.uploadStatus&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.Z,{className:"h-4 w-4 text-red-500"}),(0,a.jsx)(l.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>M(e.id),title:"Retry upload",children:(0,a.jsx)(E.Z,{className:"h-4 w-4"})})]}),(0,a.jsx)(l.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>z(e.id),disabled:"uploading"===e.uploadStatus,children:(0,a.jsx)(L.Z,{className:"h-4 w-4"})})]})]}),e.error&&(0,a.jsx)("p",{className:"text-sm text-red-500 mt-2",children:e.error})]},e.id)})]})]})}var D=r(112),O=r(4436),A=r(4499),F=r(1240),H=r(4453),I=r(5733);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let Q=(0,h.Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Y=[{value:"public",label:"Public",description:"Anyone can view this story",icon:O.Z,iconColor:"text-green-600"},{value:"organization",label:"Organization Only",description:"Only members of your organization can view",icon:A.Z,iconColor:"text-blue-600"},{value:"mentors",label:"Mentors Only",description:"Only your connected mentors can view",icon:F.Z,iconColor:"text-purple-600"},{value:"private",label:"Private",description:"Only you can view this story",icon:H.Z,iconColor:"text-gray-600"},{value:"anonymous",label:"Anonymous Public",description:"Public but your identity is hidden",icon:I.Z,iconColor:"text-orange-600"}];function W(e){let{visibility:t,onChange:r}=e;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d._,{className:"text-base font-medium",children:"Privacy Settings"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Choose who can see your story"})]}),(0,a.jsx)(D.E,{value:t,onValueChange:r,children:(0,a.jsx)("div",{className:"space-y-3",children:Y.map(e=>{let r=e.icon,s=t===e.value;return(0,a.jsx)(f.Zb,{className:(0,p.cn)("relative cursor-pointer transition-all",s?"border-primary shadow-sm":"hover:border-gray-400"),children:(0,a.jsxs)("label",{htmlFor:e.value,className:"flex items-start p-4 cursor-pointer",children:[(0,a.jsx)(D.m,{value:e.value,id:e.value,className:"mt-1"}),(0,a.jsxs)("div",{className:"ml-4 flex-1",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(r,{className:(0,p.cn)("h-5 w-5",e.iconColor)}),(0,a.jsx)("span",{className:"font-medium",children:e.label})]})}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:e.description})]})]})},e.value)})})}),(0,a.jsx)(f.Zb,{className:"bg-blue-50 dark:bg-blue-950 border-blue-200 dark:border-blue-800",children:(0,a.jsxs)("div",{className:"p-4 flex items-start space-x-3",children:[(0,a.jsx)(Q,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5"}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("p",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Privacy Best Practices"}),(0,a.jsxs)("ul",{className:"mt-2 space-y-1 text-blue-800 dark:text-blue-200",children:[(0,a.jsx)("li",{children:"• Consider sharing publicly to inspire others"}),(0,a.jsx)("li",{children:"• Use organization-only for sensitive but collaborative content"}),(0,a.jsx)("li",{children:"• Choose mentors-only for personal growth discussions"}),(0,a.jsx)("li",{children:"• Keep drafts private until you're ready to share"}),(0,a.jsx)("li",{children:"• Anonymous sharing lets you be open while protecting identity"})]})]})]})})]})}var X=r(500),$=r(2513),G=r(6717),K=r(9061);function J(e){let{story:t,onSave:r,isSubmitting:n=!1,mode:i}=e,[p,h]=(0,s.useState)((null==t?void 0:t.title)||""),[y,v]=(0,s.useState)((null==t?void 0:t.content)||""),[g,j]=(0,s.useState)((null==t?void 0:t.storyType)||"reflection"),[b,N]=(0,s.useState)((null==t?void 0:t.visibility)||"private"),[w,k]=(0,s.useState)((null==t?void 0:t.tags)||[]),[Z,C]=(0,s.useState)(""),[S,z]=(0,s.useState)([]),[R,V]=(0,s.useState)([]),[E,U]=(0,s.useState)((null==t?void 0:t.media)||[]),[q,D]=(0,s.useState)(!(null==t?void 0:t.published)),[O,A]=(0,s.useState)(!1),[F,H]=(0,s.useState)({}),Q=(0,s.useRef)(null),Y=()=>{let e={};return p.trim()||(e.title="Title is required"),y.trim()||(e.content="Story content is required"),y.trim().split(/\s+/).length<50&&(e.content="Story should be at least 50 words"),H(e),0===Object.keys(e).length},J=()=>{Z.trim()&&!w.includes(Z.trim())&&(k([...w,Z.trim()]),C(""))},ee=e=>{k(w.filter(t=>t!==e))},et=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!Y())return;let t=R.map(e=>({url:e.url,key:e.key,name:e.file.name,size:e.file.size,type:e.file.type}));r({title:p,content:y,storyType:g,visibility:b,tags:w,published:e,media:t.length>0?t:void 0})},er=y.trim().split(/\s+/).filter(e=>e.length>0).length,ea=Math.ceil(er/200);return(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)(x.mQ,{defaultValue:"content",className:"space-y-6",children:[(0,a.jsxs)(x.dr,{className:"grid w-full grid-cols-4",children:[(0,a.jsxs)(x.SP,{value:"content",className:"flex items-center gap-2",children:[(0,a.jsx)(_.Z,{className:"h-4 w-4"}),"Content"]}),(0,a.jsxs)(x.SP,{value:"media",className:"flex items-center gap-2",children:[(0,a.jsx)(P,{className:"h-4 w-4"}),"Media"]}),(0,a.jsxs)(x.SP,{value:"settings",className:"flex items-center gap-2",children:[(0,a.jsx)(X.Z,{className:"h-4 w-4"}),"Settings"]}),(0,a.jsxs)(x.SP,{value:"preview",className:"flex items-center gap-2",children:[(0,a.jsx)(I.Z,{className:"h-4 w-4"}),"Preview"]})]}),(0,a.jsxs)(x.nU,{value:"content",className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d._,{htmlFor:"title",children:"Story Title"}),(0,a.jsx)(o.I,{id:"title",value:p,onChange:e=>h(e.target.value),placeholder:"Give your story a meaningful title",className:F.title?"border-red-500":""}),F.title&&(0,a.jsx)("p",{className:"text-sm text-red-500 mt-1",children:F.title})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d._,{htmlFor:"story-type",children:"Story Type"}),(0,a.jsxs)(c.Ph,{value:g,onValueChange:j,children:[(0,a.jsx)(c.i4,{id:"story-type",children:(0,a.jsx)(c.ki,{})}),(0,a.jsxs)(c.Bw,{children:[(0,a.jsx)(c.Ql,{value:"reflection",children:"Reflection"}),(0,a.jsx)(c.Ql,{value:"milestone",children:"Milestone"}),(0,a.jsx)(c.Ql,{value:"challenge",children:"Challenge"}),(0,a.jsx)(c.Ql,{value:"achievement",children:"Achievement"}),(0,a.jsx)(c.Ql,{value:"goal",children:"Goal"}),(0,a.jsx)(c.Ql,{value:"update",children:"Update"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d._,{children:"Story Content"}),(0,a.jsx)(M,{content:y,onChange:v,placeholder:"Share your story here...",className:F.content?"border-red-500":""}),F.content&&(0,a.jsx)("p",{className:"text-sm text-red-500 mt-1",children:F.content}),(0,a.jsxs)("div",{className:"flex justify-between mt-2 text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:[er," words"]}),(0,a.jsxs)("span",{children:["~",ea," min read"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d._,{children:"Tags"}),(0,a.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,a.jsx)(o.I,{ref:Q,value:Z,onChange:e=>C(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),J())},placeholder:"Add tags to help others find your story"}),(0,a.jsx)(l.z,{type:"button",variant:"outline",onClick:J,disabled:!Z.trim(),children:(0,a.jsx)($.Z,{className:"h-4 w-4"})})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:w.map(e=>(0,a.jsxs)(u.C,{variant:"secondary",className:"pl-3 pr-1",children:[e,(0,a.jsx)("button",{type:"button",onClick:()=>ee(e),className:"ml-2 hover:text-red-500",children:(0,a.jsx)(L.Z,{className:"h-3 w-3"})})]},e))})]})]}),(0,a.jsxs)(x.nU,{value:"media",className:"space-y-6",children:[(0,a.jsx)(B,{onMediaAdd:z,onMediaUploaded:e=>{V(t=>[...t,...e])},existingMedia:E,onExistingMediaRemove:e=>{U(E.filter(t=>t.id!==e))},uploadType:"story_media",autoUpload:!0}),R.length>0&&(0,a.jsx)(m.bZ,{children:(0,a.jsxs)(m.X,{children:[R.length," file(s) uploaded successfully and will be attached to your story."]})})]}),(0,a.jsxs)(x.nU,{value:"settings",className:"space-y-6",children:[(0,a.jsx)(W,{visibility:b,onChange:N}),(0,a.jsxs)(m.bZ,{children:[(0,a.jsx)(X.Z,{className:"h-4 w-4"}),(0,a.jsx)(m.X,{children:"Your privacy settings determine who can see your story. You can change these settings at any time."})]})]}),(0,a.jsx)(x.nU,{value:"preview",className:"space-y-6",children:(0,a.jsx)(f.Zb,{children:(0,a.jsx)(f.aY,{className:"p-6",children:(0,a.jsxs)("article",{className:"prose prose-lg dark:prose-invert max-w-none",children:[(0,a.jsx)("h1",{children:p||"Untitled Story"}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-4",children:[(0,a.jsx)("span",{children:new Date().toLocaleDateString()}),(0,a.jsx)("span",{children:"\xb7"}),(0,a.jsxs)("span",{children:[ea," min read"]}),(0,a.jsx)("span",{children:"\xb7"}),(0,a.jsx)("span",{className:"capitalize",children:g})]}),w.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:w.map(e=>(0,a.jsxs)(u.C,{variant:"outline",children:[(0,a.jsx)(G.Z,{className:"h-3 w-3 mr-1"}),e]},e))}),(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:y||"<p>Your story content will appear here...</p>"}})]})})})})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-8 pt-6 border-t",children:[(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)(l.z,{variant:"outline",onClick:()=>et(!1),disabled:n,children:"Save as Draft"})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(l.z,{variant:"outline",onClick:()=>A(!O),children:[(0,a.jsx)(I.Z,{className:"h-4 w-4 mr-2"}),"Preview"]}),(0,a.jsx)(l.z,{onClick:()=>et(!0),disabled:n,children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Publishing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(K.Z,{className:"h-4 w-4 mr-2"}),"Publish Story"]})})]})]})]})}var ee=r(1266),et=r(7138);function er(){let e=(0,n.useRouter)(),{user:t}=(0,i.SE)(),[r,o]=(0,s.useState)(!1),[d,c]=(0,s.useState)(!1);if((0,s.useEffect)(()=>{c(!0)},[]),(0,s.useEffect)(()=>{d&&!t&&e.push("/api/auth/login")},[d,t,e]),!d)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})});if(!t)return null;let u=async t=>{o(!0);try{let r=await fetch("/api/stories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error("Failed to save story");let a=await r.json();e.push("/stories/".concat(a.id))}catch(e){}finally{o(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(et.default,{href:"/dashboard",children:(0,a.jsxs)(l.z,{variant:"ghost",size:"sm",children:[(0,a.jsx)(ee.Z,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})})}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:[(0,a.jsxs)("div",{className:"border-b p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Create Your Story"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Share your journey, experiences, and insights with the community"})]}),(0,a.jsx)(J,{onSave:u,isSubmitting:r,mode:"create"})]})]})})}},7992:function(e,t,r){"use strict";r.d(t,{X:function(){return d},bZ:function(){return o}});var a=r(7437),s=r(2265),n=r(3027),i=r(9354);let l=(0,n.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=s.forwardRef((e,t)=>{let{className:r,variant:s,...n}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(l({variant:s}),r),...n})});o.displayName="Alert",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",r),...s})}).displayName="AlertTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",r),...s})});d.displayName="AlertDescription"},9055:function(e,t,r){"use strict";r.d(t,{C:function(){return l}});var a=r(7437);r(2265);var s=r(3027),n=r(9354);let i=(0,s.j)("inline-flex items-center rounded-sm border px-2 py-0.5 text-xs font-medium transition-colors focus:outline-none focus:ring-1 focus:ring-ring focus:ring-offset-1",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"text-foreground border-current"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:r}),t),...s})}},9733:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var a=r(7437),s=r(2265),n=r(1538),i=r(3027),l=r(9354);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-sm text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/90",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-sm px-3",lg:"h-11 rounded-sm px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,a.jsx)(u,{className:(0,l.cn)(o({variant:s,size:i,className:r})),ref:t,...c})});d.displayName="Button"},8185:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},ll:function(){return o}});var a=r(7437),s=r(2265),n=r(9354);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-sm border bg-card text-card-foreground",r),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},7209:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var a=r(7437),s=r(2265),n=r(9354);let i=s.forwardRef((e,t)=>{let{className:r,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},402:function(e,t,r){"use strict";r.d(t,{_:function(){return d}});var a=r(7437),s=r(2265),n=r(8364),i=r(3027),l=r(9354);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.f,{ref:t,className:(0,l.cn)(o(),r),...s})});d.displayName=n.f.displayName},1617:function(e,t,r){"use strict";r.d(t,{E:function(){return l}});var a=r(7437),s=r(2265),n=r(2431),i=r(9354);let l=s.forwardRef((e,t)=>{let{className:r,value:s,...l}=e;return(0,a.jsx)(n.fC,{ref:t,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r),...l,children:(0,a.jsx)(n.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})});l.displayName=n.fC.displayName},112:function(e,t,r){"use strict";r.d(t,{E:function(){return o},m:function(){return d}});var a=r(7437),s=r(2265),n=r(9497),i=r(8165),l=r(9354);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.fC,{className:(0,l.cn)("grid gap-2",r),...s,ref:t})});o.displayName=n.fC.displayName;let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.ck,{ref:t,className:(0,l.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...s,children:(0,a.jsx)(n.z$,{className:"flex items-center justify-center",children:(0,a.jsx)(i.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})})});d.displayName=n.ck.displayName},9888:function(e,t,r){"use strict";r.d(t,{Bw:function(){return p},Ph:function(){return c},Ql:function(){return h},i4:function(){return m},ki:function(){return u}});var a=r(7437),s=r(2265),n=r(771),i=r(2421),l=r(4392),o=r(2468),d=r(9354);let c=n.fC;n.ZA;let u=n.B4,m=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e;return(0,a.jsxs)(n.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...l,children:[s,(0,a.jsx)(n.JO,{asChild:!0,children:(0,a.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.xz.displayName;let f=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})});f.displayName=n.u_.displayName;let x=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});x.displayName=n.$G.displayName;let p=s.forwardRef((e,t)=>{let{className:r,children:s,position:i="popper",...l}=e;return(0,a.jsx)(n.h_,{children:(0,a.jsxs)(n.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:i,...l,children:[(0,a.jsx)(f,{}),(0,a.jsx)(n.l_,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(x,{})]})})});p.displayName=n.VY.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...s})}).displayName=n.__.displayName;let h=s.forwardRef((e,t)=>{let{className:r,children:s,...i}=e;return(0,a.jsxs)(n.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.wU,{children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(n.eT,{children:s})]})});h.displayName=n.ck.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",r),...s})}).displayName=n.Z0.displayName},9973:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var a=r(7437),s=r(2265),n=r(8484),i=r(9354);let l=s.forwardRef((e,t)=>{let{className:r,orientation:s="horizontal",decorative:l=!0,...o}=e;return(0,a.jsx)(n.f,{ref:t,decorative:l,orientation:s,className:(0,i.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",r),...o})});l.displayName=n.f.displayName},6864:function(e,t,r){"use strict";r.d(t,{SP:function(){return d},dr:function(){return o},mQ:function(){return l},nU:function(){return c}});var a=r(7437),s=r(2265),n=r(2447),i=r(9354);let l=n.fC,o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.aV,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...s})});o.displayName=n.aV.displayName;let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...s})});d.displayName=n.xz.displayName;let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...s})});c.displayName=n.VY.displayName},2727:function(e,t,r){"use strict";r.d(t,{SE:function(){return o},dr:function(){return l}});var a=r(7437),s=r(2265),n=r(6853);let i=(0,s.createContext)(void 0);function l(e){var t;let{children:r}=e,{user:l,error:o,isLoading:d}=(0,n.aF)(),[c,u]=(0,s.useState)(null),[m,f]=(0,s.useState)(!0),[x,p]=(0,s.useState)(null),h=async()=>{if(!l){u(null),f(!1);return}try{let e=await fetch("/api/users/profile");if(!e.ok)throw Error("Failed to fetch user profile");let t=await e.json();u(t)}catch(e){p(e instanceof Error?e:Error("Unknown error"))}finally{f(!1)}};(0,s.useEffect)(()=>{d||h()},[l,d,!1]),!c||(null===(t=c.profile)||void 0===t?void 0:t.name)&&c.role&&c.role;let y=async()=>{f(!0),await h()},v=(null==c?void 0:c.role)||"youth";return(0,a.jsx)(i.Provider,{value:{user:c,isLoading:m||d,error:x||o,role:v,refreshUser:y},children:r})}function o(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useUserContext must be used within a UserProvider");return e}},9354:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(4839),s=r(6164);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}},2431:function(e,t,r){"use strict";r.d(t,{fC:function(){return j},z$:function(){return b}});var a=r(2265),s=r(8324),n=r(5171),i=r(7437),l="Progress",[o,d]=(0,s.b)(l),[c,u]=o(l),m=a.forwardRef((e,t)=>{let{__scopeProgress:r,value:a=null,max:s,getValueLabel:l=p,...o}=e;(s||0===s)&&v(s);let d=v(s)?s:100;null!==a&&g(a,d);let u=g(a,d)?a:null,m=y(u)?l(u,d):void 0;return(0,i.jsx)(c,{scope:r,value:u,max:d,children:(0,i.jsx)(n.WV.div,{"aria-valuemax":d,"aria-valuemin":0,"aria-valuenow":y(u)?u:void 0,"aria-valuetext":m,role:"progressbar","data-state":h(u,d),"data-value":null!=u?u:void 0,"data-max":d,...o,ref:t})})});m.displayName=l;var f="ProgressIndicator",x=a.forwardRef((e,t)=>{var r;let{__scopeProgress:a,...s}=e,l=u(f,a);return(0,i.jsx)(n.WV.div,{"data-state":h(l.value,l.max),"data-value":null!==(r=l.value)&&void 0!==r?r:void 0,"data-max":l.max,...s,ref:t})});function p(e,t){return"".concat(Math.round(e/t*100),"%")}function h(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function y(e){return"number"==typeof e}function v(e){return y(e)&&!isNaN(e)&&e>0}function g(e,t){return y(e)&&!isNaN(e)&&e<=t&&e>=0}x.displayName=f;var j=m,b=x}},function(e){e.O(0,[4485,8089,231,6853,2447,9439,6374,2971,7023,1744],function(){return e(e.s=5824)}),_N_E=e.O()}]);