(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8404],{3774:function(t,e,s){Promise.resolve().then(s.bind(s,7563))},1266:function(t,e,s){"use strict";s.d(e,{Z:function(){return r}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(8030).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6780:function(t,e,s){"use strict";s.d(e,{Z:function(){return r}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(8030).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3231:function(t,e,s){"use strict";s.d(e,{Z:function(){return r}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(8030).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},6938:function(t,e,s){"use strict";s.d(e,{Z:function(){return r}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(8030).Z)("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]])},1935:function(t,e,s){"use strict";s.d(e,{Z:function(){return r}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(8030).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},933:function(t,e,s){"use strict";s.d(e,{Z:function(){return r}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(8030).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2023:function(t,e,s){"use strict";s.d(e,{Z:function(){return r}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(8030).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},4086:function(t,e,s){"use strict";s.d(e,{Z:function(){return r}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(8030).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},6649:function(t,e,s){"use strict";s.d(e,{Z:function(){return r}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(8030).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},2022:function(t,e,s){"use strict";s.d(e,{Z:function(){return r}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(8030).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},6463:function(t,e,s){"use strict";var r=s(1169);s.o(r,"useParams")&&s.d(e,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(e,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(e,{useSearchParams:function(){return r.useSearchParams}})},7563:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return w}});var r=s(7437),i=s(2265),n=s(6463),a=s(8185),o=s(9733),c=s(9055),u=s(7992),l=s(2183),d=s(6353),h=s(2727),p=s(933),f=s(3231),m=s(1935),x=s(6938),v=s(6780),y=s(1266),g=s(6649),b=s(2022),j=s(4086),N=s(2023);function w(t){var e,s,w,k,C,Z,O,R;let{params:M}=t,S=(0,n.useRouter)(),{user:P}=(0,h.useUser)(),{data:D,isLoading:E,error:z}=(0,d.bs)(M.id),F=(0,d.Lj)(M.id),[A,L]=(0,i.useState)(!1),q=(null==P?void 0:P.role)==="org_admin"||(null==P?void 0:P.role)==="platform_admin";return E?(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsx)(a.Zb,{children:(0,r.jsxs)(a.aY,{className:"p-6 space-y-4",children:[(0,r.jsx)(l.O,{className:"h-8 w-1/3"}),(0,r.jsx)(l.O,{className:"h-4 w-2/3"}),(0,r.jsx)(l.O,{className:"h-4 w-1/2"})]})})}):z||!D?(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)(u.bZ,{variant:"destructive",children:[(0,r.jsx)(v.Z,{className:"h-4 w-4"}),(0,r.jsx)(u.X,{children:"Failed to load apprenticeship details. Please try again later."})]})}):(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)(o.z,{variant:"ghost",onClick:()=>S.push("/apprenticeships"),className:"mb-4",children:[(0,r.jsx)(y.Z,{className:"mr-2 h-4 w-4"}),"Back to Apprenticeships"]}),(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold mb-2",children:[(null===(e=D.contractDetails)||void 0===e?void 0:e.duration)||"Apprenticeship"," Program"]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)(c.C,{className:(t=>{switch(t){case"pending":return"bg-yellow-100 text-yellow-800";case"active":return"bg-green-100 text-green-800";case"completed":return"bg-blue-100 text-blue-800";case"terminated":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(D.status),children:(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(t=>{switch(t){case"pending":return(0,r.jsx)(p.Z,{className:"h-4 w-4"});case"active":case"completed":return(0,r.jsx)(f.Z,{className:"h-4 w-4"});case"terminated":return(0,r.jsx)(m.Z,{className:"h-4 w-4"});case"on_hold":return(0,r.jsx)(x.Z,{className:"h-4 w-4"});default:return(0,r.jsx)(v.Z,{className:"h-4 w-4"})}})(D.status),D.status]})})})]}),q&&(0,r.jsxs)(o.z,{onClick:()=>S.push("/apprenticeships/".concat(M.id,"/edit")),children:[(0,r.jsx)(g.Z,{className:"mr-2 h-4 w-4"}),"Edit"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsxs)(a.Zb,{children:[(0,r.jsx)(a.Ol,{children:(0,r.jsx)(a.ll,{children:"Contract Details"})}),(0,r.jsxs)(a.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Duration"}),(0,r.jsx)("p",{children:(null===(s=D.contractDetails)||void 0===s?void 0:s.duration)||"Not specified"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Hours per Week"}),(0,r.jsx)("p",{children:(null===(w=D.contractDetails)||void 0===w?void 0:w.hoursPerWeek)||"Not specified"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Start Date"}),(0,r.jsx)("p",{children:new Date(D.startDate).toLocaleDateString()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"End Date"}),(0,r.jsx)("p",{children:D.endDate?new Date(D.endDate).toLocaleDateString():"Not specified"})]})]}),(null===(k=D.contractDetails)||void 0===k?void 0:k.supervisorName)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Supervisor"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(b.Z,{className:"h-4 w-4 text-gray-400"}),(0,r.jsx)("span",{children:D.contractDetails.supervisorName}),D.contractDetails.supervisorEmail&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.Z,{className:"h-4 w-4 text-gray-400 ml-2"}),(0,r.jsx)("span",{children:D.contractDetails.supervisorEmail})]})]})]})]})]}),(0,r.jsxs)(a.Zb,{children:[(0,r.jsx)(a.Ol,{children:(0,r.jsx)(a.ll,{children:"Learning Objectives"})}),(0,r.jsx)(a.aY,{children:(null===(Z=D.contractDetails)||void 0===Z?void 0:null===(C=Z.learningObjectives)||void 0===C?void 0:C.length)?(0,r.jsx)("ul",{className:"list-disc list-inside space-y-2",children:D.contractDetails.learningObjectives.map((t,e)=>(0,r.jsx)("li",{children:t},e))}):(0,r.jsx)("p",{className:"text-gray-500",children:"No learning objectives specified"})})]}),(0,r.jsxs)(a.Zb,{children:[(0,r.jsx)(a.Ol,{children:(0,r.jsx)(a.ll,{children:"Responsibilities"})}),(0,r.jsx)(a.aY,{children:(null===(R=D.contractDetails)||void 0===R?void 0:null===(O=R.responsibilities)||void 0===O?void 0:O.length)?(0,r.jsx)("ul",{className:"list-disc list-inside space-y-2",children:D.contractDetails.responsibilities.map((t,e)=>(0,r.jsx)("li",{children:t},e))}):(0,r.jsx)("p",{className:"text-gray-500",children:"No responsibilities specified"})})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(a.Zb,{children:[(0,r.jsx)(a.Ol,{children:(0,r.jsx)(a.ll,{children:"Quick Actions"})}),(0,r.jsxs)(a.aY,{className:"space-y-2",children:[q&&"pending"===D.status&&(0,r.jsx)(o.z,{className:"w-full",onClick:()=>F.mutate({status:"active"}),children:"Activate Apprenticeship"}),q&&"active"===D.status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.z,{className:"w-full",variant:"outline",onClick:()=>F.mutate({status:"on_hold"}),children:"Put On Hold"}),(0,r.jsx)(o.z,{className:"w-full",variant:"outline",onClick:()=>F.mutate({status:"completed"}),children:"Mark as Completed"})]}),(0,r.jsxs)(o.z,{className:"w-full",variant:"outline",children:[(0,r.jsx)(N.Z,{className:"mr-2 h-4 w-4"}),"View Contract"]})]})]}),D.progressNotes&&(0,r.jsxs)(a.Zb,{children:[(0,r.jsx)(a.Ol,{children:(0,r.jsx)(a.ll,{children:"Progress Notes"})}),(0,r.jsx)(a.aY,{children:(0,r.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:D.progressNotes})})]})]})]})]})}},7992:function(t,e,s){"use strict";s.d(e,{X:function(){return u},bZ:function(){return c}});var r=s(7437),i=s(2265),n=s(3027),a=s(9354);let o=(0,n.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=i.forwardRef((t,e)=>{let{className:s,variant:i,...n}=t;return(0,r.jsx)("div",{ref:e,role:"alert",className:(0,a.cn)(o({variant:i}),s),...n})});c.displayName="Alert",i.forwardRef((t,e)=>{let{className:s,...i}=t;return(0,r.jsx)("h5",{ref:e,className:(0,a.cn)("mb-1 font-medium leading-none tracking-tight",s),...i})}).displayName="AlertTitle";let u=i.forwardRef((t,e)=>{let{className:s,...i}=t;return(0,r.jsx)("div",{ref:e,className:(0,a.cn)("text-sm [&_p]:leading-relaxed",s),...i})});u.displayName="AlertDescription"},9055:function(t,e,s){"use strict";s.d(e,{C:function(){return o}});var r=s(7437);s(2265);var i=s(3027),n=s(9354);let a=(0,i.j)("inline-flex items-center rounded-sm border px-2 py-0.5 text-xs font-medium transition-colors focus:outline-none focus:ring-1 focus:ring-ring focus:ring-offset-1",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"text-foreground border-current"}},defaultVariants:{variant:"default"}});function o(t){let{className:e,variant:s,...i}=t;return(0,r.jsx)("div",{className:(0,n.cn)(a({variant:s}),e),...i})}},9733:function(t,e,s){"use strict";s.d(e,{z:function(){return u}});var r=s(7437),i=s(2265),n=s(1538),a=s(3027),o=s(9354);let c=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-sm text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/90",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-sm px-3",lg:"h-11 rounded-sm px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=i.forwardRef((t,e)=>{let{className:s,variant:i,size:a,asChild:u=!1,...l}=t,d=u?n.g7:"button";return(0,r.jsx)(d,{className:(0,o.cn)(c({variant:i,size:a,className:s})),ref:e,...l})});u.displayName="Button"},8185:function(t,e,s){"use strict";s.d(e,{Ol:function(){return o},SZ:function(){return u},Zb:function(){return a},aY:function(){return l},ll:function(){return c}});var r=s(7437),i=s(2265),n=s(9354);let a=i.forwardRef((t,e)=>{let{className:s,...i}=t;return(0,r.jsx)("div",{ref:e,className:(0,n.cn)("rounded-sm border bg-card text-card-foreground",s),...i})});a.displayName="Card";let o=i.forwardRef((t,e)=>{let{className:s,...i}=t;return(0,r.jsx)("div",{ref:e,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...i})});o.displayName="CardHeader";let c=i.forwardRef((t,e)=>{let{className:s,...i}=t;return(0,r.jsx)("h3",{ref:e,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...i})});c.displayName="CardTitle";let u=i.forwardRef((t,e)=>{let{className:s,...i}=t;return(0,r.jsx)("p",{ref:e,className:(0,n.cn)("text-sm text-muted-foreground",s),...i})});u.displayName="CardDescription";let l=i.forwardRef((t,e)=>{let{className:s,...i}=t;return(0,r.jsx)("div",{ref:e,className:(0,n.cn)("p-6 pt-0",s),...i})});l.displayName="CardContent",i.forwardRef((t,e)=>{let{className:s,...i}=t;return(0,r.jsx)("div",{ref:e,className:(0,n.cn)("flex items-center p-6 pt-0",s),...i})}).displayName="CardFooter"},2183:function(t,e,s){"use strict";s.d(e,{O:function(){return n}});var r=s(7437),i=s(9354);function n(t){let{className:e,...s}=t;return(0,r.jsx)("div",{className:(0,i.cn)("animate-pulse rounded-md bg-muted",e),...s})}},2727:function(t,e,s){"use strict";s.d(e,{SE:function(){return c},dr:function(){return o}});var r=s(7437),i=s(2265),n=s(6853);let a=(0,i.createContext)(void 0);function o(t){var e;let{children:s}=t,{user:o,error:c,isLoading:u}=(0,n.aF)(),[l,d]=(0,i.useState)(null),[h,p]=(0,i.useState)(!0),[f,m]=(0,i.useState)(null),x=async()=>{if(!o){d(null),p(!1);return}try{let t=await fetch("/api/users/profile");if(!t.ok)throw Error("Failed to fetch user profile");let e=await t.json();d(e)}catch(t){m(t instanceof Error?t:Error("Unknown error"))}finally{p(!1)}};(0,i.useEffect)(()=>{u||x()},[o,u,!1]),!l||(null===(e=l.profile)||void 0===e?void 0:e.name)&&l.role&&l.role;let v=async()=>{p(!0),await x()},y=(null==l?void 0:l.role)||"youth";return(0,r.jsx)(a.Provider,{value:{user:l,isLoading:h||u,error:f||c,role:y,refreshUser:v},children:s})}function c(){let t=(0,i.useContext)(a);if(void 0===t)throw Error("useUserContext must be used within a UserProvider");return t}},6353:function(t,e,s){"use strict";s.d(e,{Lj:function(){return u},bs:function(){return c},pV:function(){return o}});var r=s(5118),i=s(3191),n=s(5524);let a="apprenticeships";function o(t){return(0,r.a)({queryKey:[a,t],queryFn:async()=>{let e=new URLSearchParams;if(null==t?void 0:t.status){let s=Array.isArray(t.status)?t.status:[t.status];e.append("status",s.join(","))}(null==t?void 0:t.organizationId)&&e.append("organizationId",t.organizationId),(null==t?void 0:t.youthProfileId)&&e.append("youthProfileId",t.youthProfileId);let s=await fetch("/api/apprenticeships?".concat(e.toString()));if(!s.ok)throw Error("Failed to fetch apprenticeships");return s.json()}})}function c(t){return(0,r.a)({queryKey:[a,t],queryFn:async()=>{let e=await fetch("/api/apprenticeships/".concat(t));if(!e.ok)throw Error("Failed to fetch apprenticeship");return e.json()},enabled:!!t})}function u(t){let e=(0,i.NL)();return(0,n.D)({mutationFn:async e=>{let{status:s,reason:r,notes:i}=e,n=await fetch("/api/apprenticeships/".concat(t,"/status"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s,reason:r,notes:i})});if(!n.ok)throw Error((await n.json()).error||"Failed to update apprenticeship status");return n.json()},onSuccess:()=>{e.invalidateQueries({queryKey:[a]}),e.invalidateQueries({queryKey:[a,t]})}})}},9354:function(t,e,s){"use strict";s.d(e,{cn:function(){return n}});var r=s(4839),i=s(6164);function n(){for(var t=arguments.length,e=Array(t),s=0;s<t;s++)e[s]=arguments[s];return(0,i.m6)((0,r.W)(e))}},2812:function(t,e,s){"use strict";s.d(e,{R:function(){return o},m:function(){return a}});var r=s(9948),i=s(3494),n=s(924),a=class extends i.F{#t;#e;#s;constructor(t){super(),this.mutationId=t.mutationId,this.#e=t.mutationCache,this.#t=[],this.state=t.state||o(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#e.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#e.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||("pending"===this.state.status?this.scheduleGc():this.#e.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(t){let e=()=>{this.#r({type:"continue"})};this.#s=(0,n.Mz)({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(Error("No mutationFn found")),onFail:(t,e)=>{this.#r({type:"failed",failureCount:t,error:e})},onPause:()=>{this.#r({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#e.canRun(this)});let s="pending"===this.state.status,r=!this.#s.canStart();try{if(s)e();else{this.#r({type:"pending",variables:t,isPaused:r}),await this.#e.config.onMutate?.(t,this);let e=await this.options.onMutate?.(t);e!==this.state.context&&this.#r({type:"pending",context:e,variables:t,isPaused:r})}let i=await this.#s.start();return await this.#e.config.onSuccess?.(i,t,this.state.context,this),await this.options.onSuccess?.(i,t,this.state.context),await this.#e.config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,t,this.state.context),this.#r({type:"success",data:i}),i}catch(e){try{throw await this.#e.config.onError?.(e,t,this.state.context,this),await this.options.onError?.(e,t,this.state.context),await this.#e.config.onSettled?.(void 0,e,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,e,t,this.state.context),e}finally{this.#r({type:"error",error:e})}}finally{this.#e.runNext(this)}}#r(t){this.state=(e=>{switch(t.type){case"failed":return{...e,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"pending":return{...e,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...e,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:t.error,failureCount:e.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}})(this.state),r.Vr.batch(()=>{this.#t.forEach(e=>{e.onMutationUpdate(t)}),this.#e.notify({mutation:this,type:"updated",action:t})})}};function o(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},5524:function(t,e,s){"use strict";s.d(e,{D:function(){return l}});var r=s(2265),i=s(2812),n=s(9948),a=s(9010),o=s(6298),c=class extends a.l{#i;#n=void 0;#a;#o;constructor(t,e){super(),this.#i=t,this.setOptions(e),this.bindMethods(),this.#c()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.#i.defaultMutationOptions(t),(0,o.VS)(this.options,e)||this.#i.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#a,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,o.Ym)(e.mutationKey)!==(0,o.Ym)(this.options.mutationKey)?this.reset():this.#a?.state.status==="pending"&&this.#a.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#a?.removeObserver(this)}onMutationUpdate(t){this.#c(),this.#u(t)}getCurrentResult(){return this.#n}reset(){this.#a?.removeObserver(this),this.#a=void 0,this.#c(),this.#u()}mutate(t,e){return this.#o=e,this.#a?.removeObserver(this),this.#a=this.#i.getMutationCache().build(this.#i,this.options),this.#a.addObserver(this),this.#a.execute(t)}#c(){let t=this.#a?.state??(0,i.R)();this.#n={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#u(t){n.Vr.batch(()=>{if(this.#o&&this.hasListeners()){let e=this.#n.variables,s=this.#n.context;t?.type==="success"?(this.#o.onSuccess?.(t.data,e,s),this.#o.onSettled?.(t.data,null,e,s)):t?.type==="error"&&(this.#o.onError?.(t.error,e,s),this.#o.onSettled?.(void 0,t.error,e,s))}this.listeners.forEach(t=>{t(this.#n)})})}},u=s(3191);function l(t,e){let s=(0,u.NL)(e),[i]=r.useState(()=>new c(s,t));r.useEffect(()=>{i.setOptions(t)},[i,t]);let a=r.useSyncExternalStore(r.useCallback(t=>i.subscribe(n.Vr.batchCalls(t)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),l=r.useCallback((t,e)=>{i.mutate(t,e).catch(o.ZT)},[i]);if(a.error&&(0,o.L3)(i.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:l,mutateAsync:a.mutate}}}},function(t){t.O(0,[4485,6853,1336,5118,2971,7023,1744],function(){return t(t.s=3774)}),_N_E=t.O()}]);