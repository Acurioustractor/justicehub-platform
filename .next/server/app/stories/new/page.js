(()=>{var e={};e.id=4378,e.ids=[4378],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},66304:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o}),s(84664),s(64968),s(7629),s(12523);var a=s(23191),r=s(88716),l=s(37922),i=s.n(l),n=s(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let o=["",{children:["stories",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,84664)),"/Users/benknight/Code/JusticeHub/src/app/stories/new/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,64968)),"/Users/benknight/Code/JusticeHub/src/app/layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,7629)),"/Users/benknight/Code/JusticeHub/src/app/error.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,12523)),"/Users/benknight/Code/JusticeHub/src/app/not-found.tsx"]}],c=["/Users/benknight/Code/JusticeHub/src/app/stories/new/page.tsx"],u="/stories/new/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/stories/new/page",pathname:"/stories/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},37172:(e,t,s)=>{Promise.resolve().then(s.bind(s,48543))},86333:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(62881).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},41291:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(62881).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},83855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(62881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},31215:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(62881).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},58038:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(62881).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},63685:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(62881).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},49758:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(62881).Z)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]])},48543:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>es});var a=s(10326),r=s(17577),l=s(35047),i=s(2588),n=s(91664),d=s(41190),o=s(27299),c=s(29280),u=s(38443),x=s(33261),m=s(29752),h=s(50384),p=s(51223),y=s(62881);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let j=(0,y.Z)("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]),v=(0,y.Z)("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]),g=(0,y.Z)("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]),f=(0,y.Z)("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]),b=(0,y.Z)("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]),k=(0,y.Z)("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),N=(0,y.Z)("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]),w=(0,y.Z)("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),Z=(0,y.Z)("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]),S=(0,y.Z)("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]),C=(0,y.Z)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);var M=s(72427);function P({content:e,onChange:t,placeholder:s="Start writing your story...",className:l}){let i=(0,r.useRef)(null),d=(0,r.useRef)(!0),o=()=>{i.current&&(d.current=!0,t(i.current.innerHTML))},c=(e,t)=>{document.execCommand(e,!1,t),i.current?.focus(),o()},u=({onClick:e,icon:t,title:s})=>a.jsx(n.z,{type:"button",variant:"ghost",size:"sm",onClick:e,title:s,className:"h-8 w-8 p-0",children:a.jsx(t,{className:"h-4 w-4"})});return(0,a.jsxs)("div",{className:(0,p.cn)("border rounded-lg overflow-hidden",l),children:[(0,a.jsxs)("div",{className:"border-b bg-gray-50 dark:bg-gray-800 p-2 flex items-center gap-1 flex-wrap",children:[a.jsx(u,{onClick:()=>c("undo"),icon:j,title:"Undo"}),a.jsx(u,{onClick:()=>c("redo"),icon:v,title:"Redo"}),a.jsx(M.Z,{orientation:"vertical",className:"h-6 mx-1"}),a.jsx(u,{onClick:()=>c("formatBlock","h2"),icon:g,title:"Heading 2"}),a.jsx(u,{onClick:()=>c("formatBlock","h3"),icon:f,title:"Heading 3"}),a.jsx(M.Z,{orientation:"vertical",className:"h-6 mx-1"}),a.jsx(u,{onClick:()=>c("bold"),icon:b,title:"Bold"}),a.jsx(u,{onClick:()=>c("italic"),icon:k,title:"Italic"}),a.jsx(u,{onClick:()=>c("underline"),icon:N,title:"Underline"}),a.jsx(M.Z,{orientation:"vertical",className:"h-6 mx-1"}),a.jsx(u,{onClick:()=>c("insertUnorderedList"),icon:w,title:"Bullet List"}),a.jsx(u,{onClick:()=>c("insertOrderedList"),icon:Z,title:"Numbered List"}),a.jsx(u,{onClick:()=>c("formatBlock","blockquote"),icon:S,title:"Quote"}),a.jsx(M.Z,{orientation:"vertical",className:"h-6 mx-1"}),a.jsx(u,{onClick:()=>{let e=prompt("Enter URL:");e&&c("createLink",e)},icon:C,title:"Insert Link"})]}),a.jsx("div",{ref:i,contentEditable:!0,onInput:o,onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),c("insertText","    "))},className:(0,p.cn)("min-h-[400px] p-4 focus:outline-none prose prose-lg dark:prose-invert max-w-none","prose-p:my-3 prose-headings:mt-6 prose-headings:mb-4","prose-ul:my-3 prose-ol:my-3 prose-li:my-1","prose-blockquote:border-l-4 prose-blockquote:border-gray-300 prose-blockquote:pl-4","[&:empty:before]:content-[attr(data-placeholder)] [&:empty:before]:text-gray-400"),"data-placeholder":s,dangerouslySetInnerHTML:{__html:e}})]})}var z=s(94880);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let _=(0,y.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var q=s(49758),U=s(36283),H=s(63685),L=s(41291),V=s(94019),R=s(77506),A=s(32933);function T({onMediaAdd:e,onMediaUploaded:t,existingMedia:s=[],onExistingMediaRemove:l,maxFileSize:i=10,acceptedTypes:d=["image/*","video/*","application/pdf"],uploadType:o="story_media",autoUpload:c=!0}){let[u,h]=(0,r.useState)([]),[y,j]=(0,r.useState)(!1),[v,g]=(0,r.useState)([]),f=(0,r.useRef)(null),b=e=>e.type.startsWith("image/")?"image":e.type.startsWith("video/")?"video":"document",k=e=>{switch(e){case"image":return _;case"video":return q.Z;default:return U.Z}},N=e=>e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB",w=e=>{let t=1048576*i;return e.size>t?`File "${e.name}" exceeds maximum size of ${i}MB`:null},Z=async e=>{if(!e.file)return;let s=new FormData;s.append("file",e.file),s.append("type",o),s.append("folder",o);try{h(t=>t.map(t=>t.id===e.id?{...t,uploadStatus:"uploading",uploadProgress:0}:t));let a=await fetch("/api/upload",{method:"POST",body:s});if(!a.ok){let e=await a.json();throw Error(e.error||"Upload failed")}let r=await a.json();h(t=>t.map(t=>t.id===e.id?{...t,uploadStatus:"complete",uploadProgress:100,url:r.url,key:r.key}:t)),t&&e.file&&t([{file:e.file,url:r.url,key:r.key}])}catch(t){h(s=>s.map(s=>s.id===e.id?{...s,uploadStatus:"error",error:t instanceof Error?t.message:"Upload failed"}:s))}},S=async t=>{if(!t)return;let s=[],a=[];if(Array.from(t).forEach(e=>{let t=w(e);t?a.push(t):s.push({id:Math.random().toString(36).substr(2,9),file:e,type:b(e),name:e.name,size:e.size,uploadStatus:"pending"})}),a.length>0&&g(a),s.length>0&&(h(e=>[...e,...s]),e(s.map(e=>e.file)),c))for(let e of s)await Z(e)},C=e=>{let t=u.find(t=>t.id===e);t?.uploadStatus!=="uploading"&&h(t=>t.filter(t=>t.id!==e))},M=async e=>{let t=u.find(t=>t.id===e);t&&"error"===t.uploadStatus&&await Z(t)},P=e=>{l&&l(e)};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{onDragOver:e=>{e.preventDefault(),j(!0)},onDragLeave:e=>{e.preventDefault(),j(!1)},onDrop:e=>{e.preventDefault(),j(!1),S(e.dataTransfer.files)},className:(0,p.cn)("border-2 border-dashed rounded-lg p-8 text-center transition-colors",y?"border-primary bg-primary/5":"border-gray-300 dark:border-gray-700"),children:[a.jsx(H.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-lg font-medium mb-2",children:"Drag and drop files here, or click to browse"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:["Maximum file size: ",i,"MB"]}),a.jsx(n.z,{type:"button",variant:"outline",onClick:()=>f.current?.click(),children:"Choose Files"}),a.jsx("input",{ref:f,type:"file",multiple:!0,accept:d.join(","),onChange:e=>S(e.target.files),className:"hidden"})]}),v.length>0&&(0,a.jsxs)(x.bZ,{variant:"destructive",children:[a.jsx(L.Z,{className:"h-4 w-4"}),a.jsx(x.X,{children:a.jsx("ul",{className:"list-disc list-inside",children:v.map((e,t)=>a.jsx("li",{children:e},t))})})]}),(u.length>0||s.length>0)&&(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("h4",{className:"font-medium",children:"Attached Media"}),s.map(e=>{let t=k(e.type);return a.jsx(m.Zb,{className:"p-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(t,{className:"h-8 w-8 text-gray-400"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium",children:e.name}),a.jsx("p",{className:"text-sm text-gray-500",children:N(e.size)})]})]}),a.jsx(n.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>P(e.id),children:a.jsx(V.Z,{className:"h-4 w-4"})})]})},e.id)}),u.map(e=>{let t=k(e.type);return(0,a.jsxs)(m.Zb,{className:"p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(t,{className:"h-8 w-8 text-gray-400"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium",children:e.name}),a.jsx("p",{className:"text-sm text-gray-500",children:N(e.size)}),"uploading"===e.uploadStatus&&e.uploadProgress&&a.jsx(z.E,{value:e.uploadProgress,className:"h-1 mt-2"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:["uploading"===e.uploadStatus&&a.jsx(R.Z,{className:"h-4 w-4 animate-spin text-blue-500"}),"complete"===e.uploadStatus&&a.jsx(A.Z,{className:"h-4 w-4 text-green-500"}),"error"===e.uploadStatus&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(L.Z,{className:"h-4 w-4 text-red-500"}),a.jsx(n.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>M(e.id),title:"Retry upload",children:a.jsx(H.Z,{className:"h-4 w-4"})})]}),a.jsx(n.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>C(e.id),disabled:"uploading"===e.uploadStatus,children:a.jsx(V.Z,{className:"h-4 w-4"})})]})]}),e.error&&a.jsx("p",{className:"text-sm text-red-500 mt-2",children:e.error})]},e.id)})]})]})}var D=s(17583),E=s(54014),B=s(38787),O=s(24061),F=s(9015),I=s(12714);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let Q=(0,y.Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),J=[{value:"public",label:"Public",description:"Anyone can view this story",icon:E.Z,iconColor:"text-green-600"},{value:"organization",label:"Organization Only",description:"Only members of your organization can view",icon:B.Z,iconColor:"text-blue-600"},{value:"mentors",label:"Mentors Only",description:"Only your connected mentors can view",icon:O.Z,iconColor:"text-purple-600"},{value:"private",label:"Private",description:"Only you can view this story",icon:F.Z,iconColor:"text-gray-600"},{value:"anonymous",label:"Anonymous Public",description:"Public but your identity is hidden",icon:I.Z,iconColor:"text-orange-600"}];function $({visibility:e,onChange:t}){return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx(o._,{className:"text-base font-medium",children:"Privacy Settings"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Choose who can see your story"})]}),a.jsx(D.E,{value:e,onValueChange:t,children:a.jsx("div",{className:"space-y-3",children:J.map(t=>{let s=t.icon,r=e===t.value;return a.jsx(m.Zb,{className:(0,p.cn)("relative cursor-pointer transition-all",r?"border-primary shadow-sm":"hover:border-gray-400"),children:(0,a.jsxs)("label",{htmlFor:t.value,className:"flex items-start p-4 cursor-pointer",children:[a.jsx(D.m,{value:t.value,id:t.value,className:"mt-1"}),(0,a.jsxs)("div",{className:"ml-4 flex-1",children:[a.jsx("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(s,{className:(0,p.cn)("h-5 w-5",t.iconColor)}),a.jsx("span",{className:"font-medium",children:t.label})]})}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.description})]})]})},t.value)})})}),a.jsx(m.Zb,{className:"bg-blue-50 dark:bg-blue-950 border-blue-200 dark:border-blue-800",children:(0,a.jsxs)("div",{className:"p-4 flex items-start space-x-3",children:[a.jsx(Q,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5"}),(0,a.jsxs)("div",{className:"text-sm",children:[a.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Privacy Best Practices"}),(0,a.jsxs)("ul",{className:"mt-2 space-y-1 text-blue-800 dark:text-blue-200",children:[a.jsx("li",{children:"• Consider sharing publicly to inspire others"}),a.jsx("li",{children:"• Use organization-only for sensitive but collaborative content"}),a.jsx("li",{children:"• Choose mentors-only for personal growth discussions"}),a.jsx("li",{children:"• Keep drafts private until you're ready to share"}),a.jsx("li",{children:"• Anonymous sharing lets you be open while protecting identity"})]})]})]})})]})}var G=s(58038),X=s(83855),Y=s(40765),K=s(31215);function W({story:e,onSave:t,isSubmitting:s=!1,mode:l}){let[i,p]=(0,r.useState)(e?.title||""),[y,j]=(0,r.useState)(e?.content||""),[v,g]=(0,r.useState)(e?.storyType||"reflection"),[f,b]=(0,r.useState)(e?.visibility||"private"),[k,N]=(0,r.useState)(e?.tags||[]),[w,Z]=(0,r.useState)(""),[S,C]=(0,r.useState)([]),[M,z]=(0,r.useState)([]),[q,H]=(0,r.useState)(e?.media||[]),[L,A]=(0,r.useState)(!e?.published),[D,E]=(0,r.useState)(!1),[B,O]=(0,r.useState)({}),F=(0,r.useRef)(null),Q=()=>{let e={};return i.trim()||(e.title="Title is required"),y.trim()||(e.content="Story content is required"),y.trim().split(/\s+/).length<50&&(e.content="Story should be at least 50 words"),O(e),0===Object.keys(e).length},J=()=>{w.trim()&&!k.includes(w.trim())&&(N([...k,w.trim()]),Z(""))},W=e=>{N(k.filter(t=>t!==e))},ee=async(e=!1)=>{if(!Q())return;let s=M.map(e=>({url:e.url,key:e.key,name:e.file.name,size:e.file.size,type:e.file.type}));t({title:i,content:y,storyType:v,visibility:f,tags:k,published:e,media:s.length>0?s:void 0})},et=y.trim().split(/\s+/).filter(e=>e.length>0).length,es=Math.ceil(et/200);return(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)(h.mQ,{defaultValue:"content",className:"space-y-6",children:[(0,a.jsxs)(h.dr,{className:"grid w-full grid-cols-4",children:[(0,a.jsxs)(h.SP,{value:"content",className:"flex items-center gap-2",children:[a.jsx(U.Z,{className:"h-4 w-4"}),"Content"]}),(0,a.jsxs)(h.SP,{value:"media",className:"flex items-center gap-2",children:[a.jsx(_,{className:"h-4 w-4"}),"Media"]}),(0,a.jsxs)(h.SP,{value:"settings",className:"flex items-center gap-2",children:[a.jsx(G.Z,{className:"h-4 w-4"}),"Settings"]}),(0,a.jsxs)(h.SP,{value:"preview",className:"flex items-center gap-2",children:[a.jsx(I.Z,{className:"h-4 w-4"}),"Preview"]})]}),(0,a.jsxs)(h.nU,{value:"content",className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx(o._,{htmlFor:"title",children:"Story Title"}),a.jsx(d.I,{id:"title",value:i,onChange:e=>p(e.target.value),placeholder:"Give your story a meaningful title",className:B.title?"border-red-500":""}),B.title&&a.jsx("p",{className:"text-sm text-red-500 mt-1",children:B.title})]}),(0,a.jsxs)("div",{children:[a.jsx(o._,{htmlFor:"story-type",children:"Story Type"}),(0,a.jsxs)(c.Ph,{value:v,onValueChange:g,children:[a.jsx(c.i4,{id:"story-type",children:a.jsx(c.ki,{})}),(0,a.jsxs)(c.Bw,{children:[a.jsx(c.Ql,{value:"reflection",children:"Reflection"}),a.jsx(c.Ql,{value:"milestone",children:"Milestone"}),a.jsx(c.Ql,{value:"challenge",children:"Challenge"}),a.jsx(c.Ql,{value:"achievement",children:"Achievement"}),a.jsx(c.Ql,{value:"goal",children:"Goal"}),a.jsx(c.Ql,{value:"update",children:"Update"})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx(o._,{children:"Story Content"}),a.jsx(P,{content:y,onChange:j,placeholder:"Share your story here...",className:B.content?"border-red-500":""}),B.content&&a.jsx("p",{className:"text-sm text-red-500 mt-1",children:B.content}),(0,a.jsxs)("div",{className:"flex justify-between mt-2 text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:[et," words"]}),(0,a.jsxs)("span",{children:["~",es," min read"]})]})]}),(0,a.jsxs)("div",{children:[a.jsx(o._,{children:"Tags"}),(0,a.jsxs)("div",{className:"flex gap-2 mb-2",children:[a.jsx(d.I,{ref:F,value:w,onChange:e=>Z(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),J())},placeholder:"Add tags to help others find your story"}),a.jsx(n.z,{type:"button",variant:"outline",onClick:J,disabled:!w.trim(),children:a.jsx(X.Z,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:k.map(e=>(0,a.jsxs)(u.C,{variant:"secondary",className:"pl-3 pr-1",children:[e,a.jsx("button",{type:"button",onClick:()=>W(e),className:"ml-2 hover:text-red-500",children:a.jsx(V.Z,{className:"h-3 w-3"})})]},e))})]})]}),(0,a.jsxs)(h.nU,{value:"media",className:"space-y-6",children:[a.jsx(T,{onMediaAdd:C,onMediaUploaded:e=>{z(t=>[...t,...e])},existingMedia:q,onExistingMediaRemove:e=>{H(q.filter(t=>t.id!==e))},uploadType:"story_media",autoUpload:!0}),M.length>0&&a.jsx(x.bZ,{children:(0,a.jsxs)(x.X,{children:[M.length," file(s) uploaded successfully and will be attached to your story."]})})]}),(0,a.jsxs)(h.nU,{value:"settings",className:"space-y-6",children:[a.jsx($,{visibility:f,onChange:b}),(0,a.jsxs)(x.bZ,{children:[a.jsx(G.Z,{className:"h-4 w-4"}),a.jsx(x.X,{children:"Your privacy settings determine who can see your story. You can change these settings at any time."})]})]}),a.jsx(h.nU,{value:"preview",className:"space-y-6",children:a.jsx(m.Zb,{children:a.jsx(m.aY,{className:"p-6",children:(0,a.jsxs)("article",{className:"prose prose-lg dark:prose-invert max-w-none",children:[a.jsx("h1",{children:i||"Untitled Story"}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-4",children:[a.jsx("span",{children:new Date().toLocaleDateString()}),a.jsx("span",{children:"\xb7"}),(0,a.jsxs)("span",{children:[es," min read"]}),a.jsx("span",{children:"\xb7"}),a.jsx("span",{className:"capitalize",children:v})]}),k.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:k.map(e=>(0,a.jsxs)(u.C,{variant:"outline",children:[a.jsx(Y.Z,{className:"h-3 w-3 mr-1"}),e]},e))}),a.jsx("div",{dangerouslySetInnerHTML:{__html:y||"<p>Your story content will appear here...</p>"}})]})})})})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-8 pt-6 border-t",children:[a.jsx("div",{className:"flex gap-2",children:a.jsx(n.z,{variant:"outline",onClick:()=>ee(!1),disabled:s,children:"Save as Draft"})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(n.z,{variant:"outline",onClick:()=>E(!D),children:[a.jsx(I.Z,{className:"h-4 w-4 mr-2"}),"Preview"]}),a.jsx(n.z,{onClick:()=>ee(!0),disabled:s,children:s?(0,a.jsxs)(a.Fragment,{children:[a.jsx(R.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Publishing..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(K.Z,{className:"h-4 w-4 mr-2"}),"Publish Story"]})})]})]})]})}var ee=s(86333),et=s(90434);function es(){let e=(0,l.useRouter)(),{user:t}=(0,i.SE)(),[s,d]=(0,r.useState)(!1),[o,c]=(0,r.useState)(!1);if(!o)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})});if(!t)return null;let u=async t=>{d(!0);try{let s=await fetch("/api/stories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw Error("Failed to save story");let a=await s.json();e.push(`/stories/${a.id}`)}catch(e){}finally{d(!1)}};return a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[a.jsx("div",{className:"mb-6",children:a.jsx(et.default,{href:"/dashboard",children:(0,a.jsxs)(n.z,{variant:"ghost",size:"sm",children:[a.jsx(ee.Z,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})})}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:[(0,a.jsxs)("div",{className:"border-b p-6",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Create Your Story"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Share your journey, experiences, and insights with the community"})]}),a.jsx(W,{onSave:u,isSubmitting:s,mode:"create"})]})]})})}},33261:(e,t,s)=>{"use strict";s.d(t,{X:()=>o,bZ:()=>d});var a=s(10326),r=s(17577),l=s(79360),i=s(51223);let n=(0,l.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=r.forwardRef(({className:e,variant:t,...s},r)=>a.jsx("div",{ref:r,role:"alert",className:(0,i.cn)(n({variant:t}),e),...s}));d.displayName="Alert",r.forwardRef(({className:e,...t},s)=>a.jsx("h5",{ref:s,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";let o=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",e),...t}));o.displayName="AlertDescription"},94880:(e,t,s)=>{"use strict";s.d(t,{E:()=>b});var a=s(10326),r=s(17577),l=s(93095),i=s(45226),n="Progress",[d,o]=(0,l.b)(n),[c,u]=d(n),x=r.forwardRef((e,t)=>{let{__scopeProgress:s,value:r=null,max:l,getValueLabel:n=p,...d}=e;(l||0===l)&&v(l);let o=v(l)?l:100;null!==r&&g(r,o);let u=g(r,o)?r:null,x=j(u)?n(u,o):void 0;return(0,a.jsx)(c,{scope:s,value:u,max:o,children:(0,a.jsx)(i.WV.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":j(u)?u:void 0,"aria-valuetext":x,role:"progressbar","data-state":y(u,o),"data-value":u??void 0,"data-max":o,...d,ref:t})})});x.displayName=n;var m="ProgressIndicator",h=r.forwardRef((e,t)=>{let{__scopeProgress:s,...r}=e,l=u(m,s);return(0,a.jsx)(i.WV.div,{"data-state":y(l.value,l.max),"data-value":l.value??void 0,"data-max":l.max,...r,ref:t})});function p(e,t){return`${Math.round(e/t*100)}%`}function y(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function j(e){return"number"==typeof e}function v(e){return j(e)&&!isNaN(e)&&e>0}function g(e,t){return j(e)&&!isNaN(e)&&e<=t&&e>=0}h.displayName=m;var f=s(51223);let b=r.forwardRef(({className:e,value:t,...s},r)=>a.jsx(x,{ref:r,className:(0,f.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...s,children:a.jsx(h,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));b.displayName=x.displayName},84664:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>l,default:()=>n});var a=s(68570);let r=(0,a.createProxy)(String.raw`/Users/benknight/Code/JusticeHub/src/app/stories/new/page.tsx`),{__esModule:l,$$typeof:i}=r;r.default;let n=(0,a.createProxy)(String.raw`/Users/benknight/Code/JusticeHub/src/app/stories/new/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[8948,8447,5981,9642,9404,8407,1812,3452,8623],()=>s(66304));module.exports=a})();